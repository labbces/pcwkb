{% extends "base.html" %}

{% block content %}

{% load static %}

<title>Data Submission</title>

<link rel="stylesheet" href="https://unpkg.com/bootstrap@5.3.2/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="https://unpkg.com/bs-brain@2.0.3/components/teams/team-1/assets/css/team-1.css">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""/>

<h2>Data Submission</h2>

<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form.as_p }}
    <input type="submit" value="Submit" class="btn btn-success">
</form>

{% if invalid_species_error %}
<div id="species-error-box" class="alert alert-warning mt-3">
    <p>Invalid reference for species. Please complete the species_data sheet or submit a new species using the form.</p>
    <button id="complete-species-data" class="btn btn-primary">Complete species_data sheet</button>
    <button id="submit-new-species" class="btn btn-secondary">Submit new species</button>
</div>
{% endif %}

<script>
    document.getElementById('complete-species-data').addEventListener('click', function() {
        alert('Please complete the species_data sheet as per the given instructions.');
        window.location.href = "{% url 'data_submission' %}";
    });

    document.getElementById('submit-new-species').addEventListener('click', function() {
        window.location.href = "{% url 'species_submission' %}";
    });
</script>

{% endblock %}
