{% extends "base.html" %}

{% block content %}

<p> {% if scientific_name %}

<header>
  <h1>{{ scientific_name }}</h1>
</header>

<div class="b-example-divider"></div>

{{ species_code }}

{% if common_name %}
{{ common_name }}
{% endif %}

{% endif %} </p>

{% if biomass_composition %}
<div>
  <div id="grafico"></canvas>
  </div>
  {% endif %}

  Plant Cell Wall-related Genes


  {% if genes_paginated %}

  {% for page in genes_paginated.page %}

    <table class="table" text-align="center">
      <thead>
        <tr>
          <th scope="col">Gene Identifier</th>
          <th scope="col">Description</th>
          <th scope="col">Paper</th>
        </tr>
      </thead>
      <tbody>
        {% for gene in page %}
          <tr>
            <th scope="row">{{ gene.gene_name }}</th>
            <td>{{ gene.description }}</td>
            <td>{{ gene.original_db }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>

  {% endfor %}

  <div class="pagination">
    <span class="step-links">
        {% if page_obj.has_previous %}
            <a href="?page=1">&laquo; first</a>
            <a href="?page={{ page_obj.previous_page_number }}">previous</a>
        {% endif %}

        <span class="current">
            Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
        </span>

        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">next</a>
            <a href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
        {% endif %}
    </span>
  </div>

{% endif %}


  <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
  <script>
    PLOT = document.getElementById('grafico');
    var data = [{
      values: [45, 20, 3, 25, 7],
      labels: ['Cellulose', 'Hemicellulose', 'Pectin', 'Lignin', 'Other'],
      domain: { column: 0 },
      name: 'Cell Wall Components',
      hoverinfo: 'label+percent',
      hole: .4,
      type: 'pie',
      automargin: true
    }];

    var layout = {
      title: '<i>Populus trichocarpa</i>',
      annotations: [
        {
          font: {
            size: 15
          },
          showarrow: false,
          text: 'Cell Wall Components',
          x: 0.5,
          y: 0.5
        }],
      height: 600,
      width: 800,
      showlegend: true,
      legend: { "orientation": "h" },
      grid: { rows: 1, columns: 1 }
    };

    Plotly.newPlot(PLOT, data, layout);
  </script>
</html>

{% endblock %}